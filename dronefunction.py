import rospy
from geometry_msgs.msg import Twist
from std_msgs.msg import Empty
import cv2
import cv_bridge
import dlib
import time
from scipy.spatial import distance
FLIGHT_TIME = 45 # seconds

def traj_callback(msg):
    global trajectory
    trajectory = msg.data



def main():
  # rospy.init_node("Initialize")
  # takeoff_pub = rospy.Publisher("/bebop/takeoff",Empty,queue_size=1)
  # landing_pub = rospy.Publisher("/bebop/land",Empty,queue_size=1)
  # drone_pub = rospy.Publisher("/bebop/cmd_vel",Twist,queue_size=1)

  # take off
  # takeoff_pub.publish(Empty())
  # time.sleep(4.0)
  # while not '''rospy.is_shutdown() and''' time.time() - start_time < FLIGHT_TIME:
  start_time = time.time()
  print("Starting")
# while not time.time() - start_time < FLIGHT_TIME:

  # pos_update = Twist()
  collision = False
  moved = False
  move_dist = .15
  # get position of quadcopter from mocap
  quad_x = 4
  quad_y = -10
  quad_z = -6
  quad_pos = [quad_x, quad_y, quad_z]
  # get list of lists for points over time of thrown object
  trajectory = [[1.4874515533447266, 1.5045107686686849, 1.5215699839926435, 1.5386291993166019, 1.5556884146405605, 1.5727476299645189, 1.5898068452884773, 1.6068660606124359, 1.6239252759363942, 1.6409844912603528, 1.6580437065843112, 1.6751029219082696, 1.6921621372322282, 1.7092213525561866, 1.7262805678801452, 1.7433397832041035, 1.7603989985280619, 1.7774582138520205, 1.7945174291759789, 1.8115766444999375, 1.8286358598238959, 1.8456950751478542, 1.8627542904718126, 1.8798135057957712, 1.8968727211197298, 1.9139319364436882, 1.9309911517676466, 1.948050367091605, 1.9651095824155635, 1.9821687977395219, 1.9992280130634805, 2.0162872283874389, 2.0333464437113973, 2.0504056590353557, 2.0674648743593145, 2.0845240896832729, 2.1015833050072312, 2.1186425203311896, 2.1357017356551484, 2.1527609509791068, 2.1698201663030652, 2.1868793816270236, 2.2039385969509819, 2.2209978122749403, 2.2380570275988987, 2.2551162429228575, 2.2721754582468159, 2.2892346735707743, 2.3062938888947331, 2.3233531042186915, 2.3404123195426498, 2.3574715348666082, 2.3745307501905666, 2.391589965514525, 2.4086491808384833, 2.4257083961624422, 2.4427676114864005, 2.4598268268103589, 2.4768860421343173, 2.4939452574582761, 2.5110044727822345, 2.5280636881061929, 2.5451229034301512, 2.5621821187541096, 2.579241334078068, 2.5963005494020264, 2.6133597647259852, 2.6304189800499436, 2.6474781953739024, 2.6645374106978608, 2.6815966260218191, 2.6986558413457775, 2.7157150566697359, 2.7327742719936943, 2.7498334873176526, 2.766892702641611, 2.7839519179655698, 2.8010111332895282, 2.8180703486134866, 2.8351295639374454, 2.8521887792614038, 2.8692479945853622, 2.8863072099093205, 2.9033664252332789, 2.9204256405572373, 2.9374848558811957, 2.9545440712051545, 2.9716032865291129, 2.9886625018530713, 3.0057217171770301, 3.0227809325009884, 3.0398401478249468, 3.0568993631489052, 3.0739585784728636, 3.091017793796822, 3.1080770091207803, 3.1251362244447392, 3.1421954397686975, 3.1592546550926559, 3.1763138704166147, 3.1933730857405731, 3.2104323010645315, 3.2274915163884899, 3.2445507317124482, 3.2616099470364066, 3.278669162360365, 3.2957283776843234, 3.3127875930082822, 3.3298468083322406, 3.3469060236561994, 3.3639652389801578, 3.3810244543041161, 3.3980836696280745, 3.4151428849520329, 3.4322021002759913, 3.4492613155999496, 3.466320530923908, 3.4833797462478668, 3.5004389615718252, 3.5174981768957836, 3.534557392219742, 3.5516166075437008, 3.5686758228676592, 3.5857350381916175, 3.6027942535155759, 3.6198534688395343, 3.6369126841634931, 3.6539718994874515, 3.6710311148114099, 3.6880903301353682, 3.7051495454593266, 3.7222087607832854, 3.7392679761072438, 3.7563271914312022, 3.7733864067551606, 3.7904456220791189, 3.8075048374030778, 3.8245640527270361, 3.8416232680509945, 3.8586824833749529, 3.8757416986989113, 3.8928009140228701, 3.9098601293468285, 3.9269193446707868, 3.9439785599947452, 3.9610377753187036, 3.9780969906426624, 3.9951562059666208, 4.0122154212905787, 4.029274636614538, 4.0463338519384955, 4.0633930672624547, 4.0804522825864131, 4.0975114979103715, 4.1145707132343299, 4.1316299285582883, 4.1486891438822466, 4.165748359206205, 4.1828075745301643, 4.1998667898541218, 4.216926005178081, 4.2339852205020385, 4.2510444358259978, 4.2681036511499562, 4.2851628664739145, 4.3022220817978729, 4.3192812971218313, 4.3363405124457906, 4.353399727769748, 4.3704589430937073, 4.3875181584176648, 4.4045773737416241, 4.4216365890655824, 4.4386958043895408, 4.4557550197134992, 4.4728142350374576, 4.4898734503614159, 4.5069326656853743, 4.5239918810093336, 4.5410510963332911, 4.5581103116572503, 4.5751695269812078, 4.5922287423051671, 4.6092879576291255, 4.6263471729530838, 4.6434063882770422, 4.6604656036010006, 4.6775248189249599, 4.6945840342489173, 4.7116432495728766, 4.7287024648968341, 4.7457616802207934, 4.7628208955447517, 4.7798801108687101, 4.7969393261926685, 4.8139985415166269, 4.8310577568405852, 4.8481169721645436, 4.8651761874885029, 4.8822354028124604, 4.8992946181364196, 4.9163538334603771, 4.9334130487843364, 4.9504722641082948, 4.9675314794322531, 4.9845906947562115, 5.0016499100801699, 5.0187091254041283, 5.0357683407280867, 5.0528275560520459, 5.0698867713760034, 5.0869459866999627, 5.1040052020239202, 5.1210644173478794, 5.1381236326718378, 5.1551828479957962, 5.1722420633197546, 5.1893012786437129, 5.2063604939676722, 5.2234197092916297, 5.240478924615589, 5.2575381399395464, 5.2745973552635057, 5.2916565705874641, 5.3087157859114225, 5.3257750012353808, 5.3428342165593392, 5.3598934318832976, 5.376952647207256, 5.3940118625312152, 5.4110710778551727, 5.428130293179132, 5.4451895085030895, 5.4622487238270487, 5.4793079391510071, 5.4963671544749655, 5.5134263697989239, 5.5304855851228822, 5.5475448004468406, 5.564604015770799, 5.5816632310947574, 5.5987224464187166, 5.615781661742675, 5.6328408770666334, 5.6499000923905918, 5.6669593077145501, 5.6840185230385085, 5.7010777383624669, 5.7181369536864253, 5.7351961690103836, 5.752255384334342, 5.7693145996583013, 5.7863738149822597, 5.803433030306218, 5.8204922456301764, 5.8375514609541348, 5.8546106762780932, 5.8716698916020515, 5.8887291069260099, 5.9057883222499683, 5.9228475375739267, 5.9399067528978851, 5.9569659682218443, 5.9740251835458027, 5.9910843988697611, 6.0081436141937195, 6.0252028295176778, 6.0422620448416362, 6.0593212601655946, 6.076380475489553, 6.0934396908135113, 6.1104989061374697, 6.127558121461429, 6.1446173367853874, 6.1616765521093457, 6.1787357674333041, 6.1957949827572625, 6.2128541980812209, 6.2299134134051792, 6.2469726287291376, 6.264031844053096, 6.2810910593770544, 6.2981502747010136, 6.315209490024972, 6.3322687053489304, 6.3493279206728888, 6.3663871359968471, 6.3834463513208055, 6.4005055666447639, 6.4175647819687223, 6.4346239972926806, 6.451683212616639, 6.4687424279405983, 6.4858016432645567, 6.502860858588515, 6.5199200739124734, 6.5369792892364318, 6.5540385045603902, 6.5710977198843485, 6.5881569352083069, 6.6052161505322653, 6.6222753658562237, 6.639334581180182, 6.6563937965041413, 6.6734530118280997, 6.6905122271520581, 6.7075714424760164, 6.7246306577999748, 6.7416898731239332, 6.7587490884478916, 6.7758083037718499, 6.7928675190958083, 6.8099267344197667, 6.826985949743726, 6.8440451650676843, 6.8611043803916427, 6.8781635957156011, 6.8952228110395595, 6.9122820263635179, 6.9293412416874762, 6.9464004570114346, 6.963459672335393, 6.9805188876593514, 6.9975781029833106, 7.014637318307269, 7.0316965336312274, 7.0487557489551858, 7.0658149642791441, 7.0828741796031025, 7.0999333949270609, 7.1169926102510193, 7.1340518255749776, 7.151111040898936, 7.1681702562228953, 7.1852294715468537, 7.202288686870812, 7.2193479021947704, 7.2364071175187288, 7.2534663328426872, 7.2705255481666455, 7.2875847634906039, 7.3046439788145623, 7.3217031941385207, 7.338762409462479, 7.3558216247864383, 7.3728808401103967, 7.3899400554343551, 7.4069992707583134, 7.4240584860822718, 7.4411177014062302, 7.4581769167301886, 7.4752361320541469, 7.4922953473781053, 7.5093545627020637, 7.526413778026023, 7.5434729933499813, 7.5605322086739397, 7.5775914239978981, 7.5946506393218565, 7.6117098546458148, 7.6287690699697732, 7.6458282852937316, 7.66288750061769, 7.6799467159416483, 7.6970059312656076, 7.714065146589566, 7.7311243619135244, 7.7481835772374827, 7.7652427925614411, 7.7823020078853995, 7.7993612232093579, 7.8164204385333163, 7.8334796538572746, 7.850538869181233, 7.8675980845051923, 7.8846572998291506, 7.901716515153109, 7.9187757304770674, 7.9358349458010258, 7.9528941611249842, 7.9699533764489425, 7.9870125917729009, 8.0040718070968602, 8.0211310224208177, 8.0381902377447769, 8.0552494530687362, 8.0723086683926937, 8.0893678837166512, 8.1064270990406104, 8.1234863143645697, 8.1405455296885272, 8.1576047450124847, 8.1746639603364439, 8.1917231756604032, 8.2087823909843607, 8.22584160630832, 8.2429008216322792, 8.2599600369562367, 8.2770192522801942, 8.2940784676041535, 8.3111376829281127, 8.3281968982520702, 8.3452561135760277, 8.362315328899987, 8.3793745442239462, 8.3964337595479037, 8.413492974871863, 8.4305521901958222, 8.4476114055197797, 8.4646706208437372, 8.4817298361676965, 8.4987890514916558, 8.5158482668156132, 8.5329074821395707, 8.54996669746353, 8.5670259127874893, 8.5840851281114467, 8.601144343435406, 8.6182035587593653, 8.6352627740833228, 8.6523219894072803, 8.6693812047312395, 8.6864404200551988, 8.7034996353791563, 8.7205588507031138, 8.7376180660270748, 8.7546772813510323, 8.7717364966749898, 8.788795711998949, 8.8058549273229083, 8.8229141426468658, 8.8399733579708233, 8.8570325732947826, 8.8740917886187418, 8.8911510039426993, 8.9082102192666568, 8.9252694345906178, 8.9423286499145753, 8.9593878652385328, 8.9764470805624921, 8.9935062958864513, 9.0105655112104088, 9.0276247265343663, 9.0446839418583256, 9.0617431571822848, 9.0788023725062423, 9.0958615878302016, 9.1129208031541609, 9.1299800184781184, 9.1470392338020758, 9.1640984491260351, 9.1811576644499944, 9.1982168797739519, 9.2152760950979093, 9.2323353104218686, 9.2493945257458279, 9.2664537410697854, 9.2835129563937446, 9.3005721717177039, 9.3176313870416614, 9.3346906023656189, 9.3517498176895781, 9.3688090330135374, 9.3858682483374949, 9.4029274636614524, 9.4199866789854116, 9.4370458943093709, 9.4541051096333284, 9.4711643249572877, 9.4882235402812451, 9.5052827556052044, 9.5223419709291619, 9.5394011862531212, 9.5564604015770804, 9.5735196169010379, 9.5905788322249972, 9.6076380475489547, 9.6246972628729139, 9.6417564781968714, 9.6588156935208307, 9.6758749088447882, 9.6929341241687474, 9.7099933394927067, 9.7270525548166642, 9.7441117701406235, 9.761170985464581, 9.7782302007885402, 9.7952894161124977, 9.812348631436457, 9.8294078467604145, 9.8464670620843737, 9.8635262774083312, 9.8805854927322905, 9.8976447080562497, 9.9147039233802072, 9.9317631387041665, 9.948822354028124, 9.9658815693520832, 9.9829407846760407, 10.0], [0.14450283590767371, 0.13936611389789091, 0.13408673415468067, 0.12866469667804312, 0.12310000146797809, 0.11739264852448572, 0.11154263784756599, 0.10554996943721878, 0.099414643293444252, 0.09313665941624226, 0.086716017805612958, 0.080152718461556277, 0.073446761384072107, 0.066598146573160627, 0.059606874028821671, 0.05247294375105542, 0.045196355739861784, 0.03777710999524065, 0.030215206517192228, 0.022510645305716316, 0.014663426360813112, 0.0066735496824825227, -0.0014589847292754629, -0.0097341768744609383, -0.018152026753073813, -0.02671253436511397, -0.035415699710581512, -0.044261522789476447, -0.053250003601798886, -0.062381142147548703, -0.071654938426725934, -0.081071392439330425, -0.090630504185362309, -0.10033227366482159, -0.11017670087770839, -0.12016378582402257, -0.13029352850376391, -0.14056592891693287, -0.15098098706352925, -0.16153870294355296, -0.17223907655700385, -0.18308210790388238, -0.19406779698418805, -0.20519614379792134, -0.21646714834508177, -0.22788081062567014, -0.23943713063968539, -0.25113610838712824, -0.26297774386799855, -0.27496203708229616, -0.2870889880300212, -0.29935859671117337, -0.31177086312575319, -0.32432578727376016, -0.33702336915519476, -0.34986360877005679, -0.36284650611834618, -0.37597206120006271, -0.38924027401520689, -0.40265114456377848, -0.41620467284577745, -0.42990085886120349, -0.44373970261005724, -0.45772120409233813, -0.47184536330804655, -0.48611218025718222, -0.50052165493974599, -0.51507378735573628, -0.52976857750515483, -0.54460602538799996, -0.55958613100427279, -0.57470889435397277, -0.58997431543710044, -0.60538239425365514, -0.62093313080363755, -0.63662652508704709, -0.65246257710388467, -0.66844128685414905, -0.68456265433784103, -0.70082667955496047, -0.71723336250550729, -0.73378270318948113, -0.75047470160688268, -0.76730935775771125, -0.78428667164196764, -0.80140664325965139, -0.81866927261076261, -0.83607455969530109, -0.8536225045132666, -0.87131310706466036, -0.88914636734948072, -0.90712228536772888, -0.92524086111940396, -0.94350209460450685, -0.96190598582303666, -0.98045253477499428, -0.99914174146037948, -1.0179736058791919, -1.0369481280314312, -1.056065307917099, -1.0753251455361932, -1.0947276408887152, -1.1142727939746642, -1.1339606047940409, -1.1537910733468448, -1.1737641996330763, -1.193879983652735, -1.2141384254058218, -1.2345395248923352, -1.2550832821122768, -1.2757696970656449, -1.2965987697524408, -1.3175705001726639, -1.3386848883263145, -1.359941934213392, -1.3813416378338976, -1.4028839991878301, -1.4245690182751909, -1.4463966950959781, -1.4683670296501932, -1.4904800219378351, -1.5127356719589056, -1.5351339797134023, -1.557674945201327, -1.5803585684226789, -1.6031848493774579, -1.6261537880656654, -1.6492653844872991, -1.6725196386423606, -1.6959165505308491, -1.7194561201527654, -1.7431383475081093, -1.7669632325968805, -1.7909307754190786, -1.8150409759747044, -1.8392938342637573, -1.8636893502862384, -1.8882275240421464, -1.9129083555314819, -1.937731844754244, -1.9626979917104344, -1.9878067964000519, -2.0130582588230972, -2.0384523789795694, -2.0639891568694693, -2.0896685924927958, -2.1154906858495517, -2.1414554369397325, -2.1675628457633418, -2.1938129123203791, -2.2202056366108418, -2.2467410186347347, -2.2734190583920526, -2.3002397558827989, -2.3272031111069729, -2.3543091240645739, -2.3815577947556013, -2.4089491231800571, -2.4364831093379422, -2.4641597532292514, -2.49197905485399, -2.5199410142121539, -2.5480456313037481, -2.5762929061287685, -2.6046828386872161, -2.6332154289790899, -2.6618906770043926, -2.6907085827631239, -2.7196691462552796, -2.7487723674808646, -2.778018246439875, -2.8074067831323157, -2.8369379775581827, -2.8666118297174759, -2.8964283396101975, -2.9263875072363463, -2.9564893325959227, -2.9867338156889254, -3.0171209565153578, -3.0476507550752148, -3.0783232113685024, -3.1091383253952132, -3.1400960971553551, -3.1711965266489233, -3.202439613875919, -3.2338253588363406, -3.2653537615301906, -3.29702482195747, -3.3288385401181735, -3.3607949160123067, -3.3928939496398645, -3.4251356410008533, -3.457519990095268, -3.4900469969231089, -3.5227166614843783, -3.5555289837790749, -3.588483963807199, -3.6215816015687499, -3.6548218970637305, -3.6882048502921347, -3.7217304612539706, -3.7553987299492295, -3.7892096563779187, -3.8231632405400346, -3.8572594824355781, -3.8914983820645488, -3.9258799394269457, -3.9604041545227711, -3.995071027352024, -4.0298805579147059, -4.0648327462108105, -4.0999275922403475, -4.1351650960033082, -4.1705452574996995, -4.2060680767295153, -4.2417335536927601, -4.2775416883894319, -4.3134924808195318, -4.3495859309830589, -4.3858220388800113, -4.4222008045103944, -4.458722227874202, -4.4953863089714385, -4.5321930478021022, -4.5691424443661939, -4.6062344986637118, -4.6434692106946569, -4.68084658045903, -4.7183666079568312, -4.7560292931880603, -4.7938346361527131, -4.8317826368507975, -4.8698732952823063, -4.9081066114472458, -4.9464825853456098, -4.9850012169774018, -5.0236625063426219, -5.0624664534412691, -5.1014130582733435, -5.1405023208388441, -5.1797342411377736, -5.219108819170132, -5.2586260549359167, -5.2982859484351268, -5.3380884996677658, -5.3780337086338319, -5.4181215753333252, -5.4583520997662456, -5.498725281932594, -5.5392411218323696, -5.5798996194655732, -5.6207007748322049, -5.6616445879322628, -5.7027310587657478, -5.7439601873326609, -5.7853319736330002, -5.8268464176667676, -5.8685035194339621, -5.9103032789345846, -5.9522456961686334, -5.9943307711361102, -6.0365585038370151, -6.0789288942713489, -6.1214419424391071, -6.1640976483402943, -6.2068960119749077, -6.2498370333429492, -6.2929207124444169, -6.3361470492793135, -6.3795160438476373, -6.4230276961493882, -6.4666820061845653, -6.5104789739531732, -6.5544185994552064, -6.5985008826906677, -6.6427258236595552, -6.6870934223618699, -6.7316036787976126, -6.7762565929667824, -6.8210521648693803, -6.8659903945054035, -6.9110712818748565, -6.9562948269777385, -7.0016610298140458, -7.0471698903837785, -7.092821408686941, -7.1386155847235298, -7.1845524184935465, -7.2306319099969896, -7.2768540592338606, -7.3232188662041597, -7.369726330907886, -7.4163764533450411, -7.4631692335156217, -7.5101046714196302, -7.5571827670570659, -7.6044035204279279, -7.6517669315322188, -7.6992730003699368, -7.7469217269410819, -7.7947131112456534, -7.8426471532836537, -7.8907238530550812, -7.9389432105599385, -7.9873052257982193, -8.0358098987699282, -8.0844572294750652, -8.133247217913631, -8.1821798640856205, -8.2312551679910406, -8.2804731296298861, -8.3298337490021606, -8.3793370261078621, -8.4289829609469926, -8.4787715535195485, -8.5287028038255333, -8.5787767118649434, -8.6289932776377807, -8.6793525011440469, -8.7298543823837402, -8.7804989213568607, -8.8312861180634066, -8.8822159725033814, -8.9332884846767868, -8.9845036545836177, -9.0358614822238739, -9.087361967597559, -9.1390051107046713, -9.1907909115452107, -9.2427193701191772, -9.2947904864265709, -9.3470042604673935, -9.3993606922416415, -9.4518597817493202, -9.5045015289904242, -9.5572859339649554, -9.6102129966729155, -9.6632827171142992, -9.7164950952891136, -9.7698501311973551, -9.823347824839022, -9.8769881762141161, -9.9307711853226408, -9.9846968521645909, -10.038765176739972, -10.092976159048776, -10.147329799091008, -10.201826096866668, -10.256465052375756, -10.31124666561827, -10.366170936594212, -10.421237865303581, -10.476447451746379, -10.531799695922603, -10.587294597832257, -10.642932157475336, -10.698712374851842, -10.754635249961776, -10.810700782805137, -10.866908973381925, -10.923259821692142, -10.979753327735786, -11.036389491512855, -11.093168313023353, -11.150089792267282, -11.207153929244635, -11.264360723955415, -11.321710176399622, -11.379202286577257, -11.43683705448832, -11.494614480132809, -11.552534563510726, -11.610597304622072, -11.668802703466843, -11.727150760045046, -11.785641474356671, -11.844274846401726, -11.903050876180208, -11.961969563692117, -12.021030908937453, -12.080234911916216, -12.139581572628408, -12.199070891074028, -12.258702867253072, -12.318477501165548, -12.378394792811452, -12.438454742190777, -12.49865734930353, -12.559002614149716, -12.619490536729328, -12.680121117042365, -12.740894355088825, -12.801810250868721, -12.862868804382044, -12.924070015628788, -12.985413884608967, -13.046900411322572, -13.108529595769594, -13.170301437950048, -13.232215937863936, -13.294273095511251, -13.356472910891988, -13.418815384006152, -13.481300514853748, -13.543928303434773, -13.606698749749215, -13.669611853797095, -13.732667615578402, -13.79586603509313, -13.859207112341284, -13.922690847322874, -13.98631724003789, -14.050086290486327, -14.113997998668189, -14.178052364583488, -14.242249388232214, -14.306589069614361, -14.371071408729941, -14.43569640557895, -14.500464060161379, -14.565374372477235, -14.630427342526522, -14.695622970309239, -14.760961255825379, -14.826442199074943, -14.892065800057951, -14.957832058774372, -15.02374097522422, -15.089792549407502, -15.155986781324211, -15.222323670974339, -15.288803218357895, -15.355425423474887, -15.422190286325307, -15.489097806909147, -15.556147985226414, -15.623340821277122, -15.690676315061244, -15.758154466578789, -15.825775275829773, -15.893538742814185, -15.961444867532016, -16.029493649983273, -16.097685090167968, -16.166019188086089, -16.234495943737631, -16.3031153571226, -16.371877428241003, -16.440782157092826, -16.509829543678077, -16.579019587996761, -16.648352290048877, -16.717827649834408, -16.787445667353367, -16.857206342605757, -16.927109675591581, -16.997155666310821, -17.067344314763499, -17.137675620949604, -17.20814958486913, -17.278766206522079, -17.349525485908465, -17.420427423028276, -17.49147201788151, -17.562659270468171, -17.633989180788266, -17.705461748841792, -17.777076974628734, -17.848834858149111, -17.920735399402911, -17.992778598390142, -18.064964455110793, -18.137292969564879, -18.209764141752395, -18.282377971673331, -18.355134459327701, -18.428033604715491, -18.501075407836716, -18.57425986869136, -18.647586987279436, -18.721056763600934, -18.794669197655868, -18.868424289444231, -18.942322038966012, -19.01636244622123, -19.090545511209864, -19.164871233931937, -19.239339614387422, -19.313950652576349, -19.388704348498695, -19.463600702154476, -19.538639713543677, -19.613821382666313, -19.689145709522375, -19.764612694111861, -19.840222336434774, -19.915974636491111, -19.991869594280882, -20.067907209804076, -20.144087483060705], [0.084928178724534953, 0.076898732481561871, 0.068828524348555575, 0.060717554325516176, 0.052565822412443453, 0.044373328609337737, 0.036140072916198807, 0.027866055333026551, 0.019551275859821304, 0.011195734496582732, 0.0027994312433110569, -0.0056376338999938325, -0.014115460933331936, -0.022634049856703253, -0.031193400670107785, -0.039793513373545419, -0.048434387967016046, -0.05711602445052022, -0.065838422824057385, -0.074601583087627765, -0.083405505241231359, -0.092250189284868056, -0.10113563521853797, -0.11006184304224109, -0.11902881275597743, -0.12803654435974687, -0.13708503785354953, -0.14617429323738529, -0.15530431051125437, -0.16447508967515656, -0.17368663072909196, -0.18293893367306058, -0.1922319985070623, -0.20156582523109723, -0.21094041384516549, -0.22035576434926674, -0.2298118767434012, -0.23930875102756888, -0.24884638720176999, -0.25842478526600399, -0.2680439452202712, -0.27770386706457162, -0.28740455079890515, -0.29714599642327189, -0.30692820393767173, -0.31675117334210512, -0.3266149046365715, -0.33651939782107099, -0.34646465289560391, -0.35645066986016982, -0.36647744871476884, -0.37654498945940107, -0.3866532920940664, -0.39680235661876506, -0.40699218303349682, -0.41722277133826191, -0.4274941215330601, -0.43780623361789139, -0.44815910759275601, -0.45855274345765396, -0.46898714121258478, -0.47946230085754893, -0.48997822239254618, -0.50053490581757654, -0.51113235113264022, -0.521770558337737, -0.53244952743286711, -0.54316925841803032, -0.55392975129322708, -0.5647310060584565, -0.57557302271371924, -0.58645580125901509, -0.59737934169434403, -0.60834364401970631, -0.61934870823510191, -0.63039453434053061, -0.64148112233599264, -0.65260847222148777, -0.663776583997016, -0.67498545766257756, -0.68623509321817222, -0.69752549066379999, -0.70885664999946085, -0.72022857122515482, -0.73164125434088212, -0.74309469934664274, -0.75458890624243669, -0.76612387502826351, -0.77769960570412366, -0.78931609827001692, -0.8009733527259435, -0.81267136907190296, -0.82441014730789575, -0.83618968743392164, -0.84800998944998085, -0.85987105335607317, -0.87177287915219903, -0.88371546683835756, -0.8956988164145494, -0.9077229278807748, -0.91978780123703308, -0.93189343648332446, -0.94403983361964916, -0.95622699264600697, -0.96845491356239788, -0.98072359636882211, -0.99303304106527945, -1.0053832476517703, -1.0177742161282941, -1.0302059464948514, -1.0426784387514412, -1.0551916928980645, -1.0677457089347211, -1.0803404868614108, -1.0929760266781336, -1.1056523283848896, -1.1183693919816788, -1.1311272174685014, -1.1439258048453571, -1.1567651541122457, -1.1696452652691678, -1.182566138316123, -1.1955277732531113, -1.2085301700801327, -1.2215733287971875, -1.2346572494042753, -1.2477819319013965, -1.2609473762885508, -1.2741535825657382, -1.2874005507329589, -1.3006882807902125, -1.3140167727374998, -1.3273860265748199, -1.3407960423021732, -1.3542468199195596, -1.3677383594269794, -1.3812706608244325, -1.3948437241119185, -1.408457549289438, -1.4221121363569902, -1.4358074853145759, -1.4495435961621947, -1.4633204688998467, -1.4771381035275322, -1.4909965000452503, -1.504895658453002, -1.5188355787507868, -1.5328162609386047, -1.5468377050164557, -1.5608999109843407, -1.5750028788422574, -1.5891466085902091, -1.6033311002281929, -1.6175563537562099, -1.6318223691742595, -1.6461291464823427, -1.6604766856804594, -1.6748649867686092, -1.689294049746793, -1.7037638746150081, -1.7182744613732586, -1.7328258100215399, -1.7474179205598566, -1.7620507929882054, -1.7767244273065874, -1.7914388235150025, -1.8061939816134511, -1.8209899016019337, -1.8358265834804472, -1.8507040272489965, -1.8656222329075767, -1.8805812004561917, -1.8955809298948394, -1.9106214212235202, -1.9257026744422336, -1.9408246895509811, -1.9559874665497612, -1.9711910054385744, -1.9864353062174216, -2.0017203688863008, -2.0170461934452142, -2.0324127798941598, -2.0478201282331403, -2.0632682384621521, -2.0787571105811979, -2.0942867445902769, -2.1098571404893889, -2.1254682982785349, -2.1411202179577131, -2.1568128995269253, -2.1725463429861698, -2.1883205483354482, -2.2041355155747588, -2.2199912447041035, -2.2358877357234812, -2.251824988632892, -2.267803003432336, -2.283821780121813, -2.2998813187013232, -2.3159816191708664, -2.3321226815304437, -2.3483045057800531, -2.3645270919196966, -2.3807904399493731, -2.3970945498690819, -2.4134394216788246, -2.4298250553786005, -2.4462514509684095, -2.4627186084482515, -2.4792265278181276, -2.4957752090780359, -2.5123646522279772, -2.5289948572679517, -2.5456658241979602, -2.5623775530180017, -2.5791300437280764, -2.5959232963281842, -2.6127573108183242, -2.6296320871984999, -2.6465476254687061, -2.6635039256289472, -2.6805009876792196, -2.6975388116195278, -2.7146173974498673, -2.7317367451702408, -2.7488968547806465, -2.7660977262810862, -2.783339359671559, -2.8006217549520649, -2.8179449121226048, -2.8353088311831751, -2.8527135121337821, -2.8701589549744186, -2.8876451597050918, -2.9051721263257972, -2.9227398548365349, -2.9403483452373065, -2.9579975975281103, -2.9756876117089481, -2.9934183877798191, -3.0111899257407231, -3.029002225591662, -3.0468552873326322, -3.0647491109636356, -3.082683696484672, -3.1006590438957424, -3.1186751531968451, -3.1367320243879817, -3.1548296574691514, -3.1729680524403543, -3.1911472093015902, -3.2093671280528593, -3.2276278086941614, -3.2459292512254967, -3.2642714556468659, -3.2826544219582674, -3.3010781501597029, -3.3195426402511705, -3.3380478922326722, -3.356593906104206, -3.3751806818657748, -3.3938082195173749, -3.4124765190590098, -3.431185580490677, -3.4499354038123773, -3.4687259890241116, -3.487557336125878, -3.5064294451176785, -3.5253423159995112, -3.5442959487713779, -3.5632903434332768, -3.5823254999852097, -3.6014014184271765, -3.6205180987591756, -3.6396755409812078, -3.6588737450932731, -3.6781127110953715, -3.6973924389875039, -3.7167129287696685, -3.7360741804418671, -3.7554761940040979, -3.7749189694563627, -3.7944025067986624, -3.8139268060309925, -3.8334918671533567, -3.8530976901657539, -3.8727442750681842, -3.8924316218606476, -3.912159730543145, -3.9319286011156747, -3.9517382335782383, -3.9715886279308341, -3.9914797841734657, -4.0114117023061278, -4.0313843823288238, -4.0513978242415529, -4.0714520280443152, -4.0915469937371114, -4.1116827213199398, -4.1318592107928014, -4.1520764621556969, -4.1723344754086247, -4.1926332505515864, -4.2129727875845822, -4.2333530865076101, -4.2537741473206712, -4.2742359700237653, -4.2947385546168917, -4.3152819011000529, -4.3358660094732464, -4.356490879736473, -4.3771565118897335, -4.3978629059330263, -4.418610061866354, -4.4393979796897138, -4.4602266594031068, -4.4810961010065329, -4.5020063044999921, -4.5229572698834843, -4.5439489971570097, -4.5649814863205691, -4.5860547373741607, -4.6071687503177863, -4.628323525151445, -4.6495190618751359, -4.6707553604888608, -4.6920324209926187, -4.7133502433864098, -4.734708827670234, -4.7561081738440913, -4.7775482819079818, -4.7990291518619062, -4.8205507837058628, -4.8421131774398534, -4.8637163330638771, -4.8853602505779339, -4.9070449299820229, -4.9287703712761459, -4.950536574460302, -4.9723435395344913, -4.9941912664987136, -5.016079755352969, -5.0380090060972584, -5.0599790187315801, -5.0819897932559366, -5.1040413296703253, -5.1261336279747463, -5.1482666881692003, -5.1704405102536883, -5.1926550942282095, -5.2149104400927637, -5.2372065478473511, -5.2595434174919724, -5.281921049026626, -5.3043394424513144, -5.326798597766035, -5.3492985149707879, -5.3718391940655748, -5.3944206350503947, -5.4170428379252469, -5.439705802690133, -5.4624095293450523, -5.4851540178900056, -5.507939268324991, -5.5307652806500105, -5.5536320548650622, -5.5765395909701478, -5.5994878889652657, -5.6224769488504176, -5.6455067706256026, -5.6685773542908207, -5.6916886998460718, -5.7148408072913561, -5.7380336766266735, -5.7612673078520249, -5.7845417009674085, -5.8078568559728261, -5.8312127728682759, -5.8546094516537597, -5.8780468923292757, -5.9015250948948257, -5.9250440593504088, -5.9486037856960268, -5.9722042739316743, -5.9958455240573585, -6.0195275360730749, -6.0432503099788226, -6.0670138457746035, -6.0908181434604201, -6.1146632030362698, -6.1385490245021508, -6.162475607858064, -6.186442953104013, -6.2104510602399952, -6.2344999292660086, -6.2585895601820569, -6.2827199529881392, -6.306891107684252, -6.331103024270397, -6.3553557027465795, -6.3796491431127933, -6.4039833453690393, -6.4283583095153176, -6.4527740355516325, -6.4772305234779788, -6.5017277732943581, -6.5262657850007715, -6.5508445585972188, -6.5754640940836957, -6.6001243914602075, -6.6248254507267532, -6.6495672718833339, -6.6743498549299431, -6.6991731998665873, -6.7240373066932664, -6.7489421754099794, -6.773887806016722, -6.7988741985135013, -6.8239013529003127, -6.8489692691771564, -6.8740779473440314, -6.899227387400944, -6.9244175893478879, -6.9496485531848631, -6.9749202789118723, -7.0002327665289199, -7.0255860160359944, -7.050980027433102, -7.0764148007202463, -7.1018903358974228, -7.1274066329646306, -7.1529636919218715, -7.1785615127691482, -7.204200095506458, -7.2298794401337991, -7.2555995466511716, -7.2813604150585842, -7.3071620453560238, -7.3330044375434973, -7.3588875916210057, -7.384811507588549, -7.41077618544612, -7.4367816251937269, -7.4628278268313677, -7.4889147903590443, -7.5150425157767495, -7.5412110030844905, -7.5674202522822638, -7.5936702633700692, -7.6199610363479069, -7.6462925712157821, -7.6726648679736895, -7.6990779266216256, -7.7255317471595975, -7.7520263295876033, -7.7785616739056449, -7.8051377801137134, -7.8317546482118212, -7.8584122781999595, -7.8851106700781299, -7.9118498238463326, -7.9386297395045728, -7.9654504170528453, -7.9923118564911482, -8.0192140578194824, -8.046157021037855, -8.0731407461462581, -8.1001652331446952, -8.1272304820331662, -8.1543364928116677, -8.181483265480205, -8.2086708000387727, -8.2358990964873779, -8.2631681548260154, -8.2904779750546833, -8.3178285571733852, -8.3452199011821211, -8.3726520070808892, -8.4001248748696913, -8.4276385045485274, -8.4551928961173939, -8.4827880495762962, -8.5104239649252325, -8.5381006421641992, -8.5658180812932017, -8.5935762823122346, -8.6213752452213033, -8.6492149700204024, -8.6770954567095373, -8.7050167052887026, -8.7329787157579037, -8.7609814881171353, -8.7890250223664044, -8.8171093185057039, -8.8452343765350356, -8.8734001964544031, -8.9016067782638011, -8.9298541219632348, -8.9581422275526972, -8.9864710950321989]]

  # calculate all the points in the path
  print(len(trajectory))
  for point in range(0,len(trajectory[0])):
      dst = distance.euclidean(quad_pos,[trajectory[0][point], trajectory[1][point], trajectory[2][point]])
      print(dst)
      if (dst < 4):
        collision = True
  # if point is within buffer, move
  if collision == True:
      # pos_update.linear.x = move_dist
      # drone_pub.publish(pos_update)
      time.sleep(3)
  # return to original position.... will this execute before the quadcopter has moved?
      # pos_update.linear.x =  -move_dist
      print("Moved = True")
  else:
      print("Moved = False")
  # land after flight time reached
  # landing_pub.publish(Empty())
  print("Shutdown")

if __name__ == '__main__':
    main()
